<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>From Aarush :)</title>
  <style>
    * {
      padding: 0;
      margin: 0;
      box-sizing: border-box;
    }

    html, body {
      height: 100%;
    }

    body {
      width: 100%;
      background-color: #000;
      font-size: 20px;
      display: flex;
      justify-content: center;
      align-items: center;
      font-family: 'Helvetica Neue', sans-serif;
    }

    .envelop {
      width: 90%;
      max-width: 25rem;
      height: auto;
      position: relative;
      aspect-ratio: 5 / 3;
    }

    .envelop__front-paper,
    .envelop__back-paper,
    .envelop__up-paper,
    .envelop__content {
      width: 100%;
      height: 100%;
      position: absolute;
      bottom: 0;
      left: 0;
    }

    .envelop__front-paper {
      border-radius: 0.7rem;
      border: 0.35rem solid #967b5c;
      background-color: #ba9872;
      clip-path: polygon(100% 0%, 50% 70%, 0% 0%, 0% 100%, 100% 100%);
      z-index: 300;
    }

    .envelop__back-paper {
      border-radius: 0.7rem;
      background-color: #967b5c;
      clip-path: polygon(0% 0%, 100% 0%, 90% 100%, 0% 90%);
      z-index: 100;
    }

    .envelop__up-paper {
      border-radius: 0.7rem;
      background-color: #967b5c;
      z-index: 400;
      clip-path: polygon(0% 0%, 100% 0%, 50% 81%);
    }

    .envelop__sticker,
    .envelop__false-sticker {
      width: 100%;
      height: 20%;
      position: absolute;
      margin: auto;
      top: 30%;
      left: 0;
      bottom: 0;
      right: 0;
      z-index: 400;
      background-image: url("https://www.freepnglogos.com/uploads/heart-png/emoji-heart-33.png");
      background-color: #f9f9f9;
      border: 0.3rem solid #e2e2e2;
      background-size: 2rem;
      background-position: center;
      background-repeat: no-repeat;
    }

    .envelop__false-sticker {
      width: 20%;
      left: 80%;
      z-index: 300;
    }

    @media (max-width: 400px) {
      .envelop {
        max-width: 18rem;
      }

      .note__text p {
        font-size: 0.75rem;
        line-height: 1.2rem;
      }

      .envelop__sticker,
      .envelop__false-sticker {
        background-size: 1.2rem;
      }
    }

    @media (min-width: 401px) and (max-width: 768px) {
      .note__text p {
        font-size: 0.85rem;
        line-height: 1.3rem;
      }

      .envelop__sticker,
      .envelop__false-sticker {
        background-size: 1.6rem;
      }
    }

    @media (min-width: 769px) {
      .note__text p {
        font-size: 1rem;
        line-height: 1.5rem;
      }

      .envelop__sticker,
      .envelop__false-sticker {
        background-size: 2rem;
      }
    }

    .envelop__content {
      z-index: 200;
      overflow: hidden;
    }

    .love-notes {
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      position: relative;
    }

    .note {
      width: 95%;
      min-height: 30%;
      max-height: 60%;
      background-color: #f9f9f9;
      position: absolute;
      overflow-y: auto;
      transition: height 0.5s, opacity 0.25s;
      box-shadow: 0px 0px 5px 0px rgba(0, 0, 0, 0.75);
      padding: 0.5rem;
    }

    .note:nth-child(1) { bottom: 65%; }
    .note:nth-child(2) { bottom: 35%; }
    .note:nth-child(3) { bottom: 5%; }

    .note:hover {
      cursor: pointer;
      height: 70%;
    }

    .note__text {
      padding: 0.5rem;
      width: 100%;
    }

    .note__text p {
      text-align: center;
    }

    .scissors {
      cursor: url("https://i.postimg.cc/GtLCdKxR/sisors.png"), pointer;
    }

    .scissors:active {
      cursor: url("https://i.postimg.cc/GtXQ7WPZ/pngwing-com.png"), pointer;
    }

    .cursor {
      cursor: pointer;
    }
  </style>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
</head>

<body class="scissors">
  <div class="envelop">
    <div class="envelop__front-paper"></div>
    <div class="envelop__back-paper"></div>
    <div class="envelop__up-paper js-up-paper"></div>
    <div class="envelop__sticker js-sticker"></div>
    <div class="envelop__false-sticker"></div>
    <div class="envelop__content js-envelop-content">
      <div class="love-notes">
        <div class="note js-note">
          <div class="note__text">
            <p>Hey Dear, <br> I don't know how to begin, but I'll try to speak from the heart. I've liked you for a long time not just for how you look, but for the person you are. Every time I see you smile or even walk by, it brightens my mood. I don't know if you've ever noticed, but you've been special to me for a while now.</p>
          </div>
        </div>
        <div class="note js-note">
          <div class="note__text">
            <p>I know you've been ignoring me lately. Maybe you're busy, or maybe you just don't feel the same. And I understand. But I couldn't keep this inside anymore. I needed to tell you how I feel, even if you never reply. I'm not asking you to like me back right now. I just want you to know that someone here truly cares about you. I think about you, I respect you, and I really wish we could talk, laugh, and maybe spend time together. I believe there's something beautiful in honesty, and this is my honest feeling for you. I'm not perfect, and I don't want to disturb you. I just want one chance to show you who I really am, not just a crush, but someone who will always support, listen, and treat you with respect.</p>
          </div>
        </div>
        <div class="note js-note">
          <div class="note__text">
            <p>If you ever feel like giving this a chance, even a small one, I promise I'll never make you regret it. And if you don't feel the same, that's okay too. I will never force anything. I'll quietly walk away with respect, but at least I'll be at peace knowing I tried. I never talked about you ever since we had our first conversation on 22nd July 2023 (Moral Science Period). But last month, Namish made me realise that my feelings will be my forever regret if I never try. Also, I am not that type of person like in 8th who really did such creepy things. Thank you for reading this.<br><br> Yours truly,<br> Aarush Gupta</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    let mobile_media_query = window.matchMedia("(max-width: 400px)");
    let tablet_media_query = window.matchMedia("(min-width: 400px) and (max-width: 800px)");
    const notes = document.querySelectorAll(".js-note");

    function recize_notes() {
      for (let i = 0; i < notes.length; i++) {
        if (notes[i].classList.contains("active")) {
          notes[i].classList.remove("active");
          gsap.set(notes[i], {
            height: "50%",
            clearProps: "all"
          });
        }
      }
    }

    function notes_ready() {
      gsap.to(".js-envelop-content", {
        height: "95%",
        duration: 0.5
      });

      for (let i = 0; i < notes.length; i++) {
        notes[i].addEventListener("click", function () {
          if (mobile_media_query.matches) {
            toggle_note(i, 125, 40);
          } else if (tablet_media_query.matches) {
            toggle_note(i, 80, 21);
          } else {
            toggle_note(i, 70, 20);
          }
        });
      }
    }

    function toggle_note(index, baseHeight, multiplier) {
      const note = notes[index];
      if (note.classList.contains("active")) {
        note.classList.remove("active");
        gsap.set(note, {
          height: "70%",
          clearProps: "all"
        });
      } else {
        for (let i = 0; i < notes.length; i++) {
          if (notes[i].classList.contains("active")) {
            notes[i].classList.remove("active");
            gsap.set(notes[i], {
              height: "70%",
              clearProps: "all"
            });
          }
        }
        note.classList.add("active");
        gsap.set(note, {
          height: `${baseHeight + multiplier * index}%`
        });
      }
    }

    function set_up_paper() {
      var arr = [0, 0, 100, 0, 50, 61];
      gsap.set(".js-up-paper", {
        bottom: "97%",
        rotation: 180,
        zIndex: 200,
        clipPath: `polygon(${arr[0]}% ${arr[1]}%, ${arr[2]}% ${arr[3]}%, ${arr[4]}% ${arr[5]}%)`,
        onComplete: notes_ready
      });
    }

    function envelop_transition() {
      gsap.to(".js-up-paper", {
        bottom: "1%",
        duration: 0.25,
        onComplete: set_up_paper
      });
      document.querySelector(".js-up-paper").removeEventListener("click", envelop_transition);
      document.querySelector(".js-up-paper").classList.remove("cursor");
    }

    function sticker() {
      gsap.set(".js-sticker", { width: "20%", left: "-80%" });
      document.body.classList.remove("scissors");
      document.querySelector(".js-sticker").removeEventListener("click", sticker);
      document.querySelector(".js-up-paper").addEventListener("click", envelop_transition);
      document.querySelector(".js-up-paper").classList.add("cursor");
    }

    document.querySelector(".js-sticker").addEventListener("click", sticker);
    window.onresize = recize_notes;
  </script>
</body>

</html>
